{
  "openapi": "3.0.2",
  "info": {
    "title": "Vestra Compliance API",
    "description": "Vestra Compliance Backend REST API for managing users, tasks, and compliance-related operations. This is version 1.0; future versions may introduce breaking changes. All endpoints require authentication unless explicitly stated otherwise.",
    "version": "1.0"
  },
  "paths": {
    "/v1/users": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Retrieve a Paginated List of Users",
        "description": "Fetches a list of users with pagination and optional filtering. Supports excluding specific users and filtering by name. Requires authentication with appropriate permissions.",
        "operationId": "getUserList",
        "parameters": [
          {
            "required": true,
            "schema": {
              "title": "Page",
              "type": "integer",
              "minimum": 1
            },
            "name": "page",
            "in": "query",
            "description": "The page number for pagination (1-based indexing)."
          },
          {
            "required": true,
            "schema": {
              "title": "Page Size",
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "name": "page_size",
            "in": "query",
            "description": "Number of users to return per page."
          },
          {
            "required": false,
            "schema": {
              "title": "Exclude User IDs",
              "type": "string",
              "default": ""
            },
            "name": "exclude",
            "in": "query",
            "description": "Comma-separated list of user IDs to exclude from the results."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Name",
              "type": "string",
              "default": ""
            },
            "name": "filter_by_name",
            "in": "query",
            "description": "Filter users by partial match on first or last name."
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved the list of users.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserListResponse"
                },
                "example": {
                  "total": 100,
                  "page": 1,
                  "page_size": 10,
                  "data": [
                    {
                      "id": 1,
                      "email": "john.doe@example.com",
                      "first_name": "John",
                      "last_name": "Doe"
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid input parameters provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "users"
        ],
        "summary": "Sign Up a New User",
        "description": "Creates a new user account with the specified details. Requires authentication and admin permissions unless used in a public registration flow.",
        "operationId": "signUpUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignUpUserRequest"
              }
            }
          },
          "required": true,
          "description": "Details of the user to be created, including name, email, password, and role."
        },
        "responses": {
          "201": {
            "description": "User successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignUpUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid user details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "Delete a User",
        "description": "Removes a user from the system by their ID. Requires authentication and admin permissions.",
        "operationId": "deleteUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteUserRequest"
              }
            }
          },
          "required": true,
          "description": "ID of the user to delete."
        },
        "responses": {
          "200": {
            "description": "User successfully deleted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "User not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid user ID provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/users/avatar": {
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "Delete Current User's Avatar",
        "description": "Removes the avatar image associated with the authenticated user's account.",
        "operationId": "deleteUserAvatar",
        "responses": {
          "200": {
            "description": "Avatar successfully deleted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteUserPhotoResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Avatar not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "No avatar found for this user."
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/users/add-user": {
      "post": {
        "tags": [
          "users"
        ],
        "summary": "Add a New User",
        "description": "Adds a new user to the system with specified details, typically used by admins. Requires authentication and admin permissions.",
        "operationId": "addUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddUserRequest"
              }
            }
          },
          "required": true,
          "description": "Details of the user to be added, including name, email, and role."
        },
        "responses": {
          "201": {
            "description": "User successfully added.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid user details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/users/current": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "Retrieve Current User Details",
        "description": "Fetches the details of the authenticated user, including their profile.",
        "operationId": "getCurrentUser",
        "responses": {
          "200": {
            "description": "Successfully retrieved current user details.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetCurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "Update Current User Details",
        "description": "Updates the authenticated user's profile, such as their avatar. Requires authentication.",
        "operationId": "updateCurrentUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCurrentUserRequest"
              }
            }
          },
          "required": true,
          "description": "Updated user details, such as a new avatar."
        },
        "responses": {
          "200": {
            "description": "User successfully updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateCurrentUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid update details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks": {
      "get": {
        "tags": [
          "tasks"
        ],
        "summary": "Retrieve a Paginated List of Tasks",
        "description": "Fetches a list of tasks with pagination and extensive filtering options, including by name, priority, assignee, and date range. Supports sorting by due date or priority. Requires authentication with task read permissions.",
        "operationId": "getTaskList",
        "parameters": [
          {
            "required": true,
            "schema": {
              "title": "Page",
              "type": "integer",
              "minimum": 1
            },
            "name": "page",
            "in": "query",
            "description": "The page number for pagination (1-based indexing)."
          },
          {
            "required": true,
            "schema": {
              "title": "Page Size",
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            },
            "name": "page_size",
            "in": "query",
            "description": "Number of tasks to return per page."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Name",
              "type": "string",
              "default": ""
            },
            "name": "filter_by_name",
            "in": "query",
            "description": "Filter tasks by partial match on task name."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Priority",
              "type": "string",
              "enum": [
                "normal",
                "high",
                "critical"
              ],
              "default": ""
            },
            "name": "filter_by_priority",
            "in": "query",
            "description": "Filter tasks by priority level (normal, high, critical)."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Result",
              "type": "string",
              "enum": [
                "completed",
                "due"
              ],
              "default": ""
            },
            "name": "filter_by_result",
            "in": "query",
            "description": "Filter tasks by their completion status (completed or due)."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Assignee Users",
              "type": "string",
              "default": ""
            },
            "name": "filter_by_assignee_users",
            "in": "query",
            "description": "Comma-separated list of user IDs to filter tasks by assignees."
          },
          {
            "required": false,
            "schema": {
              "title": "Filter By Registers",
              "type": "string",
              "default": ""
            },
            "name": "filter_by_registers",
            "in": "query",
            "description": "Filter tasks by associated register IDs."
          },
          {
            "required": false,
            "schema": {
              "title": "History",
              "type": "boolean",
              "default": false
            },
            "name": "history",
            "in": "query",
            "description": "If true, includes completed tasks in the results."
          },
          {
            "required": false,
            "schema": {
              "title": "Order By Due Date",
              "type": "boolean",
              "default": false
            },
            "name": "order_by_due_date",
            "in": "query",
            "description": "If true, sorts tasks by due date in ascending order."
          },
          {
            "required": false,
            "schema": {
              "title": "Order By Priority",
              "type": "boolean",
              "default": false
            },
            "name": "order_by_priority",
            "in": "query",
            "description": "If true, sorts tasks by priority (critical > high > normal)."
          },
          {
            "required": false,
            "schema": {
              "title": "From Date",
              "type": "string",
              "format": "date-time"
            },
            "name": "from_date",
            "in": "query",
            "description": "Filter tasks with due dates on or after this date."
          },
          {
            "required": false,
            "schema": {
              "title": "To Date",
              "type": "string",
              "format": "date-time"
            },
            "name": "to_date",
            "in": "query",
            "description": "Filter tasks with due dates on or before this date."
          },
          {
            "required": false,
            "schema": {
              "title": "All Tasks",
              "type": "boolean",
              "default": false
            },
            "name": "all_tasks",
            "in": "query",
            "description": "If true, includes all tasks regardless of other filters."
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved the list of tasks.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid input parameters provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "tasks"
        ],
        "summary": "Create a New Task",
        "description": "Creates a new task with specified details such as name, priority, due date, and assigned users. Supports recurring tasks and reminders. Requires authentication with task creation permissions.",
        "operationId": "createTask",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskRequest"
              }
            }
          },
          "required": true,
          "description": "Details of the task to be created, including mandatory fields like name, priority, and due date."
        },
        "responses": {
          "201": {
            "description": "Task successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTaskResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "tasks"
        ],
        "summary": "Delete a Task",
        "description": "Removes a task from the system by its ID. Requires authentication with task deletion permissions.",
        "operationId": "deleteTask",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteTaskRequest"
              }
            }
          },
          "required": true,
          "description": "ID of the task to delete."
        },
        "responses": {
          "200": {
            "description": "Task successfully deleted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteTaskResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task ID provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "tasks"
        ],
        "summary": "Update a Task",
        "description": "Updates an existing task's details, such as name, priority, or assignees. Requires authentication with task update permissions.",
        "operationId": "updateTask",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTaskRequest"
              }
            }
          },
          "required": true,
          "description": "Updated task details, including the task ID and fields to modify."
        },
        "responses": {
          "200": {
            "description": "Task successfully updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateTaskResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks/users": {
      "post": {
        "tags": [
          "tasks"
        ],
        "summary": "Assign Users to a Task",
        "description": "Assigns one or more users to an existing task. Requires authentication with task update permissions.",
        "operationId": "addUsersToTask",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskUserRequest"
              }
            }
          },
          "required": true,
          "description": "Task ID and list of user IDs to assign."
        },
        "responses": {
          "201": {
            "description": "Users successfully assigned to the task.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTaskUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task or users not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task or users not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task or user IDs provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "tasks"
        ],
        "summary": "Remove Users from a Task",
        "description": "Unassigns one or more users from an existing task. Requires authentication with task update permissions.",
        "operationId": "deleteUsersFromTask",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteTaskUserRequest"
              }
            }
          },
          "required": true,
          "description": "Task ID and list of user IDs to unassign."
        },
        "responses": {
          "200": {
            "description": "Users successfully unassigned from the task.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteTaskUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task or users not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task or users not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task or user IDs provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks/upcoming-tasks-chart": {
      "get": {
        "tags": [
          "tasks"
        ],
        "summary": "Retrieve Upcoming Tasks Chart Data",
        "description": "Fetches data for visualizing upcoming tasks within a specified date range, grouped by due date. Requires authentication with task read permissions.",
        "operationId": "getUpcomingTasksChart",
        "parameters": [
          {
            "required": true,
            "schema": {
              "title": "From Date",
              "type": "string",
              "format": "date"
            },
            "name": "from_date",
            "in": "query",
            "description": "Start date for the task due date range (inclusive)."
          },
          {
            "required": true,
            "schema": {
              "title": "To Date",
              "type": "string",
              "format": "date"
            },
            "name": "to_date",
            "in": "query",
            "description": "End date for the task due date range (inclusive)."
          },
          {
            "required": false,
            "schema": {
              "title": "Timezone",
              "type": "string",
              "default": "Australia/Sydney"
            },
            "name": "timezone",
            "in": "query",
            "description": "Timezone for interpreting dates (e.g., 'UTC', 'Australia/Sydney')."
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved upcoming tasks chart data.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUpcomingTaskChartResponse"
                },
                "example": {
                  "dates": [
                    {
                      "date": "2025-04-14",
                      "task_count": 5
                    },
                    {
                      "date": "2025-04-15",
                      "task_count": 3
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid date range or timezone provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks/{id}": {
      "get": {
        "tags": [
          "tasks"
        ],
        "summary": "Retrieve a Task by ID",
        "description": "Fetches the details of a specific task by its ID, including associated users and results. Requires authentication with task read permissions.",
        "operationId": "getTask",
        "parameters": [
          {
            "required": true,
            "schema": {
              "title": "Task ID",
              "type": "integer",
              "minimum": 1
            },
            "name": "id",
            "in": "path",
            "description": "Unique identifier of the task to retrieve."
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved the task.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task ID provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks/by-incident-result/{incident_result_id}": {
      "get": {
        "tags": [
          "tasks"
        ],
        "summary": "Retrieve Tasks by Incident Result ID",
        "description": "Fetches all tasks associated with a specific incident result ID. Requires authentication with task read permissions.",
        "operationId": "getTasksByIncidentResult",
        "parameters": [
          {
            "required": true,
            "schema": {
              "title": "Incident Result ID",
              "type": "integer",
              "minimum": 1
            },
            "name": "incident_result_id",
            "in": "path",
            "description": "Unique identifier of the incident result."
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved tasks for the incident result.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTasksByIncidentResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Incident result not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Incident result not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid incident result ID provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/v1/tasks/result": {
      "post": {
        "tags": [
          "tasks"
        ],
        "summary": "Create a Task Result",
        "description": "Records the result of a task, such as completion status and form data. Requires authentication with task update permissions.",
        "operationId": "createTaskResult",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTaskResultRequest"
              }
            }
          },
          "required": true,
          "description": "Details of the task result, including task ID, result status, and form data."
        },
        "responses": {
          "201": {
            "description": "Task result successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTaskResultResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Invalid or missing authentication token."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Task not found.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "Task not found."
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid task result details provided.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AddUserRequest": {
        "title": "AddUserRequest",
        "description": "Request body for adding a new user to the system.",
        "required": [
          "first_name",
          "last_name",
          "email",
          "role"
        ],
        "type": "object",
        "properties": {
          "first_name": {
            "title": "First Name",
            "maxLength": 255,
            "minLength": 3,
            "type": "string",
            "description": "The user's first name."
          },
          "last_name": {
            "title": "Last Name",
            "maxLength": 255,
            "minLength": 3,
            "type": "string",
            "description": "The user's last name."
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "email",
            "description": "The user's email address."
          },
          "role": {
            "title": "Role",
            "$ref": "#/components/schemas/UserRole",
            "description": "The role assigned to the user (e.g., admin, user)."
          },
          "redirect_url": {
            "title": "Redirect URL",
            "type": "string",
            "description": "Optional URL to redirect the user after creation, if applicable."
          }
        }
      },
      "AddUserResponse": {
        "title": "AddUserResponse",
        "description": "Response containing the newly added user's details.",
        "required": [
          "user"
        ],
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "Details of the added user."
          }
        }
      },
      "CreateDueRemainderRequest": {
        "title": "CreateDueRemainderRequest",
        "description": "Request body for creating a task due reminder.",
        "required": [
          "days_before_due",
          "is_when_overdue",
          "frequency"
        ],
        "type": "object",
        "properties": {
          "days_before_due": {
            "title": "Days Before Due",
            "type": "integer",
            "minimum": 0,
            "description": "Number of days before the due date to send the reminder."
          },
          "is_when_overdue": {
            "title": "Is When Overdue",
            "type": "boolean",
            "description": "If true, the reminder is sent when the task becomes overdue."
          },
          "frequency": {
            "title": "Frequency",
            "type": "string",
            "description": "Frequency of the reminder (e.g., 'daily', 'weekly')."
          }
        }
      },
      "CreateTaskRequest": {
        "title": "CreateTaskRequest",
        "description": "Request body for creating a new task.",
        "required": [
          "name",
          "priority",
          "first_due_date",
          "is_every_employee_needs_to_complete",
          "form_id",
          "start_date"
        ],
        "type": "object",
        "properties": {
          "name": {
            "title": "Name",
            "maxLength": 50,
            "minLength": 1,
            "type": "string",
            "description": "Name or title of the task."
          },
          "priority": {
            "$ref": "#/components/schemas/TaskPriority",
            "description": "Priority level of the task (normal, high, critical)."
          },
          "first_due_date": {
            "title": "First Due Date",
            "type": "string",
            "format": "date-time",
            "description": "Initial due date for the task."
          },
          "recurrency_rule": {
            "title": "Recurrency Rule",
            "type": "string",
            "description": "Rule defining the task's recurrence pattern (e.g., 'daily', 'weekly')."
          },
          "user_ids": {
            "title": "User IDs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "List of user IDs assigned to the task."
          },
          "users_overdue_subs": {
            "title": "Users Overdue Subs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "List of user IDs subscribed to overdue notifications."
          },
          "users_completed_subs": {
            "title": "Users Completed Subs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "List of user IDs subscribed to completion notifications."
          },
          "is_every_employee_needs_to_complete": {
            "title": "Is Every Employee Needs To Complete",
            "type": "boolean",
            "description": "If true, the task must be completed by all employees."
          },
          "form_id": {
            "title": "Form ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the form associated with the task."
          },
          "description": {
            "title": "Description",
            "type": "string",
            "default": "",
            "description": "Detailed description of the task's purpose or requirements."
          },
          "due_remainders": {
            "title": "Due Reminders",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateDueRemainderRequest"
            },
            "default": [],
            "description": "List of reminders to send before or after the due date."
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "format": "date-time",
            "description": "Date and time when the task becomes active."
          }
        }
      },
      "CreateTaskResponse": {
        "title": "CreateTaskResponse",
        "description": "Response containing the newly created task's details.",
        "required": [
          "task"
        ],
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/TaskResponse",
            "description": "Details of the created task."
          }
        }
      },
      "CreateTaskResultRequest": {
        "title": "CreateTaskResultRequest",
        "description": "Request body for recording a task's result.",
        "required": [
          "task_id",
          "result",
          "form_results"
        ],
        "type": "object",
        "properties": {
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the task."
          },
          "task_result_id": {
            "title": "Task Result ID",
            "type": "integer",
            "minimum": 1,
            "description": "Optional identifier for an existing task result, if updating."
          },
          "result": {
            "title": "Result",
            "$ref": "#/components/schemas/TaskResult",
            "description": "Completion status of the task (completed or due)."
          },
          "form_results": {
            "title": "Form Results",
            "type": "object",
            "description": "Data submitted for the task's associated form."
          },
          "registers": {
            "title": "Registers",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RegisterResultRequest"
            },
            "default": [],
            "description": "List of register results associated with the task."
          }
        }
      },
      "CreateTaskResultResponse": {
        "title": "CreateTaskResultResponse",
        "description": "Response containing the created task result's details.",
        "required": [
          "task_result"
        ],
        "type": "object",
        "properties": {
          "task_result": {
            "$ref": "#/components/schemas/TaskResultResponse",
            "description": "Details of the created task result."
          }
        }
      },
      "CreateTaskUserRequest": {
        "title": "CreateTaskUserRequest",
        "description": "Request body for assigning users to a task.",
        "required": [
          "task_id",
          "user_ids"
        ],
        "type": "object",
        "properties": {
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the task."
          },
          "user_ids": {
            "title": "User IDs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "description": "List of user IDs to assign to the task."
          }
        }
      },
      "CreateTaskUserResponse": {
        "title": "CreateTaskUserResponse",
        "description": "Response indicating whether users were successfully assigned to the task.",
        "required": [
          "success"
        ],
        "type": "object",
        "properties": {
          "success": {
            "title": "Success",
            "type": "boolean",
            "description": "True if the assignment was successful."
          }
        }
      },
      "DeleteTaskRequest": {
        "title": "DeleteTaskRequest",
        "description": "Request body for deleting a task.",
        "required": [
          "id"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier of the task to delete."
          }
        }
      },
      "DeleteTaskResponse": {
        "title": "DeleteTaskResponse",
        "description": "Response indicating whether the task was successfully deleted.",
        "required": [
          "success"
        ],
        "type": "object",
        "properties": {
          "success": {
            "title": "Success",
            "type": "boolean",
            "description": "True if the task was deleted successfully."
          }
        }
      },
      "DeleteTaskUserRequest": {
        "title": "DeleteTaskUserRequest",
        "description": "Request body for unassigning users from a task.",
        "required": [
          "task_id",
          "user_ids"
        ],
        "type": "object",
        "properties": {
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the task."
          },
          "user_ids": {
            "title": "User IDs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "description": "List of user IDs to unassign from the task."
          }
        }
      },
      "DeleteTaskUserResponse": {
        "title": "DeleteTaskUserResponse",
        "description": "Response indicating whether users were successfully unassigned from the task.",
        "required": [
          "success"
        ],
        "type": "object",
        "properties": {
          "success": {
            "title": "Success",
            "type": "boolean",
            "description": "True if the unassignment was successful."
          }
        }
      },
      "DeleteUserPhotoResponse": {
        "title": "DeleteUserPhotoResponse",
        "description": "Response indicating whether the user's avatar was successfully deleted.",
        "required": [
          "status"
        ],
        "type": "object",
        "properties": {
          "status": {
            "title": "Status",
            "type": "boolean",
            "description": "True if the avatar was deleted successfully."
          }
        }
      },
      "DeleteUserRequest": {
        "title": "DeleteUserRequest",
        "description": "Request body for deleting a user.",
        "required": [
          "id"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "User ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier of the user to delete."
          }
        }
      },
      "DeleteUserResponse": {
        "title": "DeleteUserResponse",
        "description": "Response indicating whether the user was successfully deleted.",
        "required": [
          "success"
        ],
        "type": "object",
        "properties": {
          "success": {
            "title": "Success",
            "type": "boolean",
            "description": "True if the user was deleted successfully."
          }
        }
      },
      "DueRemainder": {
        "title": "DueRemainder",
        "description": "Represents a reminder for a task's due date.",
        "required": [
          "days_before_due",
          "is_when_overdue",
          "frequency",
          "task_id",
          "id"
        ],
        "type": "object",
        "properties": {
          "days_before_due": {
            "title": "Days Before Due",
            "type": "integer",
            "minimum": 0,
            "description": "Number of days before the due date to send the reminder."
          },
          "is_when_overdue": {
            "title": "Is When Overdue",
            "type": "boolean",
            "description": "If true, the reminder is sent when the task becomes overdue."
          },
          "frequency": {
            "title": "Frequency",
            "type": "string",
            "description": "Frequency of the reminder (e.g., 'daily', 'weekly')."
          },
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the associated task."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the reminder was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the reminder was last updated."
          },
          "id": {
            "title": "ID",
            "type": "integer",
            "description": "Unique identifier for the reminder."
          }
        }
      },
      "Form": {
        "title": "Form",
        "description": "Represents a form used for tasks or incidents.",
        "required": [
          "name",
          "data",
          "id"
        ],
        "type": "object",
        "properties": {
          "name": {
            "title": "Name",
            "type": "string",
            "description": "Name of the form."
          },
          "data": {
            "title": "Data",
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Structured data defining the form's fields and layout."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the form was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the form was last updated."
          },
          "id": {
            "title": "ID",
            "type": "integer",
            "description": "Unique identifier for the form."
          }
        }
      },
      "FormResponse": {
        "title": "FormResponse",
        "description": "Represents the response data for a submitted form.",
        "required": [
          "id",
          "name",
          "data",
          "created_at",
          "updated_at"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "description": "Unique identifier for the form response."
          },
          "name": {
            "title": "Name",
            "type": "string",
            "description": "Name of the form."
          },
          "data": {
            "title": "Data",
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Submitted data for the form's fields."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the form response was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the form response was last updated."
          }
        }
      },
      "GetCurrentUserResponse": {
        "title": "GetCurrentUserResponse",
        "description": "Response containing the details of the authenticated user.",
        "required": ["user"],
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "Details of the authenticated user."
          }
        }
      },
      "GetTaskListResponse": {
        "title": "GetTaskListResponse",
        "description": "Response containing a paginated list of tasks.",
        "required": [
          "total",
          "page",
          "page_size",
          "data"
        ],
        "type": "object",
        "properties": {
          "total": {
            "title": "Total",
            "type": "integer",
            "minimum": 0,
            "description": "Total number of tasks matching the query."
          },
          "page": {
            "title": "Page",
            "type": "integer",
            "minimum": 1,
            "description": "Current page number."
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer",
            "minimum": 1,
            "description": "Number of tasks per page."
          },
          "data": {
            "title": "Data",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskListWithRelationsResponse"
            },
            "description": "List of tasks with related data."
          }
        }
      },
      "GetTaskResponse": {
        "title": "GetTaskResponse",
        "description": "Response containing the details of a single task.",
        "required": [
          "task"
        ],
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/TaskWithRelationsResponse",
            "description": "Details of the requested task."
          }
        }
      },
      "GetTasksByIncidentResponse": {
        "title": "GetTasksByIncidentResponse",
        "description": "Response containing a list of tasks associated with an incident result.",
        "required": [
          "tasks"
        ],
        "type": "object",
        "properties": {
          "tasks": {
            "title": "Tasks",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskWithRelationsResponse"
            },
            "description": "List of tasks linked to the incident result."
          }
        }
      },
      "GetUpcomingTaskChartResponse": {
        "title": "GetUpcomingTaskChartResponse",
        "description": "Response containing data for visualizing upcoming tasks grouped by due date.",
        "required": [
          "dates"
        ],
        "type": "object",
        "properties": {
          "dates": {
            "title": "Task Counts by Date",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "date": {
                  "type": "string",
                  "format": "date",
                  "description": "Due date for the tasks."
                },
                "task_count": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "Number of tasks due on this date."
                }
              },
              "required": [
                "date",
                "task_count"
              ]
            },
            "description": "List of dates with corresponding task counts."
          }
        }
      },
      "GetUserListResponse": {
        "title": "GetUserListResponse",
        "description": "Response containing a paginated list of users.",
        "required": [
          "total",
          "page",
          "page_size",
          "data"
        ],
        "type": "object",
        "properties": {
          "total": {
            "title": "Total",
            "type": "integer",
            "minimum": 0,
            "description": "Total number of users matching the query."
          },
          "page": {
            "title": "Page",
            "type": "integer",
            "minimum": 1,
            "description": "Current page number."
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer",
            "minimum": 1,
            "description": "Number of users per page."
          },
          "data": {
            "title": "Data",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserResponse"
            },
            "description": "List of users."
          }
        }
      },
      "HTTPValidationError": {
        "title": "HTTPValidationError",
        "description": "Standard error response for validation errors.",
        "type": "object",
        "properties": {
          "detail": {
            "title": "Detail",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "description": "List of validation errors."
          }
        }
      },
      "RegisterResult": {
        "title": "RegisterResult",
        "enum": [
          "compliant",
          "not_compliant",
          "in_progress",
          "non_applicable"
        ],
        "description": "Result of a register check: 'compliant' for meeting requirements, 'not_compliant' for failing requirements, 'in_progress' for ongoing checks, 'non_applicable' for irrelevant checks."
      },
      "ReportFormat": {
        "title": "ReportFormat",
        "enum": [
          "xlsx",
          "pdf"
        ],
        "description": "Format of a generated report: 'xlsx' for Excel files, 'pdf' for PDF documents."
      },
      "RegisterResultRequest": {
        "title": "RegisterResultRequest",
        "description": "Request body for submitting a register result.",
        "required": [
          "register_id",
          "result"
        ],
        "type": "object",
        "properties": {
          "register_id": {
            "title": "Register ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the register."
          },
          "result": {
            "$ref": "#/components/schemas/RegisterResult",
            "description": "Result of the register check."
          }
        }
      },
      "ReportStatus": {
        "title": "ReportStatus",
        "enum": [
          "generating",
          "completed",
          "failed"
        ],
        "description": "Status of a report generation process: 'generating' for in-progress, 'completed' for successful, 'failed' for errors."
      },
      "ReportType": {
        "title": "ReportType",
        "enum": [
          "task_activity_report",
          "overdue_tasks_report",
          "task_results_report",
          "incident_report"
        ],
        "description": "Type of report: 'task_activity_report' for task activities, 'overdue_tasks_report' for overdue tasks, 'task_results_report' for task results, 'incident_report' for incidents."
      },
      "SignUpUserRequest": {
        "title": "SignUpUserRequest",
        "description": "Request body for signing up a new user.",
        "required": [
          "first_name",
          "last_name",
          "email",
          "password",
          "role"
        ],
        "type": "object",
        "properties": {
          "first_name": {
            "title": "First Name",
            "maxLength": 100,
            "minLength": 1,
            "type": "string",
            "description": "The user's first name."
          },
          "last_name": {
            "title": "Last Name",
            "maxLength": 100,
            "minLength": 1,
            "type": "string",
            "description": "The user's last name."
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "email",
            "description": "The user's email address."
          },
          "password": {
            "title": "Password",
            "maxLength": 300,
            "minLength": 8,
            "type": "string",
            "format": "password",
            "writeOnly": true,
            "description": "The user's password."
          },
          "role": {
            "title": "Role",
            "$ref": "#/components/schemas/UserRole",
            "description": "The role assigned to the user (e.g., admin, user)."
          },
          "redirect_url": {
            "title": "Redirect URL",
            "type": "string",
            "description": "Optional URL to redirect the user after signup, if applicable."
          }
        }
      },
      "SignUpUserResponse": {
        "title": "SignUpUserResponse",
        "description": "Response containing the newly signed-up user's details and session information.",
        "required": [
          "user",
          "session"
        ],
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "Details of the signed-up user."
          },
          "session": {
            "title": "Session",
            "type": "string",
            "description": "Session token or identifier for the user's session."
          }
        }
      },
      "TaskListWithRelationsResponse": {
        "title": "TaskListWithRelationsResponse",
        "description": "Represents a task in a list view with related data, including assigned users and task results, used for paginated task responses.",
        "required": [
          "id",
          "name",
          "author_id",
          "description",
          "form_id",
          "priority",
          "is_every_employee_needs_to_complete",
          "first_due_date",
          "form_name",
          "start_date"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the task."
          },
          "name": {
            "title": "Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Name or title of the task."
          },
          "author_id": {
            "title": "Author ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the user who created the task."
          },
          "description": {
            "title": "Description",
            "type": "string",
            "description": "Detailed description of the task's purpose or requirements."
          },
          "overdue_date": {
            "title": "Overdue Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task becomes overdue, if applicable."
          },
          "form_id": {
            "title": "Form ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the form associated with the task."
          },
          "priority": {
            "$ref": "#/components/schemas/TaskPriority",
            "description": "Priority level of the task (normal, high, critical)."
          },
          "is_every_employee_needs_to_complete": {
            "title": "Requires All Employees",
            "type": "boolean",
            "description": "Indicates whether the task must be completed by all employees."
          },
          "recurrency_rule": {
            "title": "Recurrency Rule",
            "type": "string",
            "description": "Rule defining the task's recurrence pattern (e.g., 'daily', 'weekly'), if applicable."
          },
          "first_due_date": {
            "title": "First Due Date",
            "type": "string",
            "format": "date-time",
            "description": "Initial due date for the task."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was last updated."
          },
          "users": {
            "title": "Assigned Users",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            },
            "default": [],
            "description": "List of users assigned to the task."
          },
          "form_name": {
            "title": "Form Name",
            "type": "string",
            "description": "Name of the form associated with the task."
          },
          "task_results": {
            "title": "Task Results",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskResultSchema"
            },
            "default": [],
            "description": "List of results recorded for the task."
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task becomes active."
          }
        }
      },
      "TaskPriority": {
        "title": "TaskPriority",
        "enum": [
          "normal",
          "high",
          "critical"
        ],
        "type": "string",
        "description": "Priority level of a task: 'normal' for standard tasks, 'high' for important tasks, 'critical' for urgent tasks requiring immediate attention."
      },
      "TaskResponse": {
        "title": "TaskResponse",
        "description": "Represents a task's core details, used in responses for task creation and updates.",
        "required": [
          "id",
          "name",
          "author_id",
          "description",
          "form_id",
          "is_every_employee_needs_to_complete",
          "priority",
          "first_due_date",
          "created_at",
          "updated_at",
          "start_date"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the task."
          },
          "name": {
            "title": "Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Name or title of the task."
          },
          "author_id": {
            "title": "Author ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the user who created the task."
          },
          "description": {
            "title": "Description",
            "type": "string",
            "description": "Detailed description of the task's purpose or requirements."
          },
          "form_id": {
            "title": "Form ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the form associated with the task."
          },
          "is_every_employee_needs_to_complete": {
            "title": "Requires All Employees",
            "type": "boolean",
            "description": "Indicates whether the task must be completed by all employees."
          },
          "recurrency_rule": {
            "title": "Recurrency Rule",
            "type": "string",
            "description": "Rule defining the task's recurrence pattern (e.g., 'daily', 'weekly'), if applicable."
          },
          "priority": {
            "$ref": "#/components/schemas/TaskPriority",
            "description": "Priority level of the task (normal, high, critical)."
          },
          "first_due_date": {
            "title": "First Due Date",
            "type": "string",
            "format": "date-time",
            "description": "Initial due date for the task."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was last updated."
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task becomes active."
          }
        }
      },
      "TaskResult": {
        "title": "TaskResult",
        "enum": [
          "completed",
          "due"
        ],
        "type": "string",
        "description": "Status of a task: 'completed' for finished tasks, 'due' for tasks pending completion."
      },
      "TaskResultResponse": {
        "title": "TaskResultResponse",
        "description": "Represents the result of a task, including completion details and submitted form data.",
        "required": [
          "id",
          "task_id",
          "completed_by_user_id",
          "completion_date",
          "result",
          "form_results",
          "created_at"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the task result."
          },
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the associated task."
          },
          "completed_by_user_id": {
            "title": "Completed By User ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the user who completed the task."
          },
          "completion_date": {
            "title": "Completion Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was completed."
          },
          "result": {
            "$ref": "#/components/schemas/TaskResult",
            "description": "Completion status of the task (completed or due)."
          },
          "form_results": {
            "title": "Form Results",
            "type": "object",
            "description": "Data submitted for the task's associated form."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task result was created."
          }
        }
      },
      "TaskResultSchema": {
        "title": "TaskResultSchema",
        "description": "Schema for a task result, including metadata and form data, used in task relations.",
        "required": [
          "id",
          "task_id",
          "completed_by_user_id",
          "completion_date",
          "result",
          "form_results"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the task result."
          },
          "task_id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the associated task."
          },
          "completed_by_user_id": {
            "title": "Completed By User ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the user who completed the task."
          },
          "completion_date": {
            "title": "Completion Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was completed."
          },
          "result": {
            "$ref": "#/components/schemas/TaskResult",
            "description": "Completion status of the task (completed or due)."
          },
          "form_results": {
            "title": "Form Results",
            "type": "object",
            "description": "Data submitted for the task's associated form."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task result was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task result was last updated."
          }
        }
      },
      "TaskWithRelationsResponse": {
        "title": "TaskWithRelationsResponse",
        "description": "Detailed task representation with related entities like form, users, results, and notifications.",
        "required": [
          "id",
          "name",
          "author_id",
          "description",
          "form_id",
          "form",
          "priority",
          "is_every_employee_needs_to_complete",
          "first_due_date",
          "start_date"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the task."
          },
          "name": {
            "title": "Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Name or title of the task."
          },
          "author_id": {
            "title": "Author ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the user who created the task."
          },
          "description": {
            "title": "Description",
            "type": "string",
            "description": "Detailed description of the task's purpose or requirements."
          },
          "form_id": {
            "title": "Form ID",
            "type": "integer",
            "minimum": 1,
            "description": "Identifier of the form associated with the task."
          },
          "form": {
            "$ref": "#/components/schemas/Form",
            "description": "Details of the form associated with the task."
          },
          "priority": {
            "$ref": "#/components/schemas/TaskPriority",
            "description": "Priority level of the task (normal, high, critical)."
          },
          "is_every_employee_needs_to_complete": {
            "title": "Requires All Employees",
            "type": "boolean",
            "description": "Indicates whether the task must be completed by all employees."
          },
          "recurrency_rule": {
            "title": "Recurrency Rule",
            "type": "string",
            "description": "Rule defining the task's recurrence pattern (e.g., 'daily', 'weekly'), if applicable."
          },
          "overdue_date": {
            "title": "Overdue Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task becomes overdue, if applicable."
          },
          "first_due_date": {
            "title": "First Due Date",
            "type": "string",
            "format": "date-time",
            "description": "Initial due date for the task."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task was last updated."
          },
          "users": {
            "title": "Assigned Users",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            },
            "default": [],
            "description": "List of users assigned to the task."
          },
          "task_results": {
            "title": "Task Results",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskResultSchema"
            },
            "default": [],
            "description": "List of results recorded for the task."
          },
          "due_remainders": {
            "title": "Due Reminders",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DueRemainder"
            },
            "default": [],
            "description": "List of reminders for the task's due date."
          },
          "overdue_subs": {
            "title": "Overdue Subscribers",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            },
            "default": [],
            "description": "List of users subscribed to overdue notifications."
          },
          "complete_subs": {
            "title": "Completion Subscribers",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            },
            "default": [],
            "description": "List of users subscribed to completion notifications."
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the task becomes active."
          }
        }
      },
      "UpdateCurrentUserRequest": {
        "title": "UpdateCurrentUserRequest",
        "description": "Request body for updating the authenticated user's profile, such as their avatar.",
        "type": "object",
        "properties": {
          "avatar": {
            "title": "Avatar",
            "type": "string",
            "format": "byte",
            "description": "Base64-encoded string representing the user's new avatar image."
          }
        }
      },
      "UpdateCurrentUserResponse": {
        "title": "UpdateCurrentUserResponse",
        "description": "Response containing the updated details of the authenticated user.",
        "required": [
          "user"
        ],
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "Updated details of the authenticated user."
          }
        }
      },
      "UpdateTaskRequest": {
        "title": "UpdateTaskRequest",
        "description": "Request body for updating an existing task's details.",
        "required": [
          "id"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "Task ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier of the task to update."
          },
          "name": {
            "title": "Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Updated name or title of the task."
          },
          "priority": {
            "$ref": "#/components/schemas/TaskPriority",
            "description": "Updated priority level of the task (normal, high, critical)."
          },
          "first_due_date": {
            "title": "First Due Date",
            "type": "string",
            "format": "date-time",
            "description": "Updated initial due date for the task."
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "format": "date-time",
            "description": "Updated timestamp when the task becomes active."
          },
          "recurrency_rule": {
            "title": "Recurrency Rule",
            "type": "string",
            "description": "Updated rule defining the task's recurrence pattern (e.g., 'daily', 'weekly')."
          },
          "is_every_employee_needs_to_complete": {
            "title": "Requires All Employees",
            "type": "boolean",
            "default": false,
            "description": "Indicates whether the task must be completed by all employees."
          },
          "form_id": {
            "title": "Form ID",
            "type": "integer",
            "minimum": 1,
            "description": "Updated identifier of the form associated with the task."
          },
          "description": {
            "title": "Description",
            "type": "string",
            "description": "Updated detailed description of the task's purpose or requirements."
          },
          "due_remainders": {
            "title": "Due Reminders",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateDueRemainderRequest"
            },
            "default": [],
            "description": "Updated list of reminders for the task's due date."
          },
          "users_overdue_subs": {
            "title": "Overdue Subscribers",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "Updated list of user IDs subscribed to overdue notifications."
          },
          "user_ids": {
            "title": "Assigned User IDs",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "Updated list of user IDs assigned to the task."
          },
          "users_completed_subs": {
            "title": "Completion Subscribers",
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "default": [],
            "description": "Updated list of user IDs subscribed to completion notifications."
          }
        }
      },
      "UpdateTaskResponse": {
        "title": "UpdateTaskResponse",
        "description": "Response containing the updated task's details.",
        "required": [
          "task"
        ],
        "type": "object",
        "properties": {
          "task": {
            "$ref": "#/components/schemas/TaskResponse",
            "description": "Details of the updated task."
          }
        }
      },
      "User": {
        "title": "User",
        "description": "Represents a simplified user entity for use in task relations.",
        "required": [
          "id",
          "first_name",
          "last_name",
          "email"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the user."
          },
          "first_name": {
            "title": "First Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's first name."
          },
          "last_name": {
            "title": "Last Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's last name."
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "email",
            "description": "User's email address."
          },
          "avatar_url": {
            "title": "Avatar URL",
            "type": "string",
            "format": "uri",
            "description": "URL to the user's avatar image, if available."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was last updated."
          }
        }
      },
      "UserResponse": {
        "title": "UserResponse",
        "description": "Detailed representation of a user, including authentication and role information.",
        "required": [
          "id",
          "email",
          "first_name",
          "last_name"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the user."
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "email",
            "description": "User's email address, used for login and notifications."
          },
          "first_name": {
            "title": "First Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's first name."
          },
          "last_name": {
            "title": "Last Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's last name."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was last updated."
          },
          "avatar_storage_item_id": {
            "title": "Avatar Storage Item ID",
            "type": "string",
            "description": "Identifier for the user's avatar in storage, if applicable."
          },
          "is_enabled_tfa": {
            "title": "Two-Factor Authentication Enabled",
            "type": "boolean",
            "description": "Indicates whether two-factor authentication is enabled for the user."
          },
          "avatar_url": {
            "title": "Avatar URL",
            "type": "string",
            "format": "uri",
            "description": "URL to the user's avatar image, if available."
          },
          "roles": {
            "title": "Roles",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserRole"
            },
            "default": [],
            "description": "List of roles assigned to the user (e.g., admin, user)."
          },
          "keycloak_user_id": {
            "title": "Keycloak User ID",
            "type": "string",
            "description": "Unique identifier for the user in the Keycloak authentication system."
          }
        }
      },
      "UserRole": {
        "title": "UserRole",
        "enum": [
          "admin",
          "user"
        ],
        "type": "string",
        "description": "Role assigned to a user: 'admin' for users with elevated permissions, 'user' for standard users."
      },
      "UserSchema": {
        "title": "UserSchema",
        "description": "Represents a user with role information, used in contexts requiring role-based access.",
        "required": [
          "id",
          "first_name",
          "last_name",
          "email",
          "role"
        ],
        "type": "object",
        "properties": {
          "id": {
            "title": "ID",
            "type": "integer",
            "minimum": 1,
            "description": "Unique identifier for the user."
          },
          "first_name": {
            "title": "First Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's first name."
          },
          "last_name": {
            "title": "Last Name",
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "User's last name."
          },
          "email": {
            "title": "Email",
            "type": "string",
            "format": "email",
            "description": "User's email address."
          },
          "role": {
            "$ref": "#/components/schemas/UserRole",
            "description": "Role assigned to the user (admin or user)."
          },
          "created_at": {
            "title": "Created At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was created."
          },
          "updated_at": {
            "title": "Updated At",
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the user was last updated."
          }
        }
      },
      "ValidationError": {
        "title": "ValidationError",
        "description": "Details of a validation error encountered in a request.",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "type": "object",
        "properties": {
          "loc": {
            "title": "Location",
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "description": "Path to the field that caused the validation error."
          },
          "msg": {
            "title": "Message",
            "type": "string",
            "description": "Description of the validation error."
          },
          "type": {
            "title": "Error Type",
            "type": "string",
            "description": "Type or category of the validation error."
          }
        }
      }
    }
  }
}
